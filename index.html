<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Portal Agua</title>
  <meta http-equiv="Cache-Control" content="no-store"><!-- evita cache -->
  <style>
      body   {font-family:sans-serif;text-align:center;padding:3rem}
      button {font-size:2rem;padding:1rem 2rem;border:none;border-radius:8px;cursor:pointer}
      #ok    {display:none;font-size:2.5rem;color:green;margin-top:2rem}
  </style>
</head>
<body>
  <h1>Portal Agua</h1>

  <button id="abrir">ðŸ”“ Abrir puerta</button>
  <p id="ok">âœ… Puerta abierta.</p>

  <script>
    const URL = 'https://pa4w8iolxvumelidtvsy5ksi3pcsburc.ui.nabu.casa/api/webhook/Cdelshorts20_Agua';

    document.getElementById('abrir').addEventListener('click', () => {
      /* 1 â€“ deshabilita el botÃ³n inmediatamente */
      const btn = document.getElementById('abrir');
      btn.disabled = true;              // no mÃ¡s pulsaciones
      btn.style.visibility = 'hidden';  // lo hace desaparecer

      /* 2 â€“ lanza la peticiÃ³n al webhook */
      fetch(URL).finally(() => {
        /* 3 â€“ muestra confirmaciÃ³n */
        document.getElementById('ok').style.display = 'block';
        /* 4 â€“ vacÃ­a la pestaÃ±a para que no se re-use */
        setTimeout(() => location.replace('about:blank'), 1500);
      });
    });
  </script>
</body>
</html>
